name: Gradle Init

on:
  workflow_dispatch:
    inputs:
      project_name:
        description: Project Name
        default: Project
        type: string
      package:
        description: Package
        default: com.razertexz.project
        type: string
      type:
        description: Type
        default: basic
        type: choice
        options:
          - pom
          - basic
          - java-application
          - java-gradle-plugin
          - java-library
          - kotlin-application
          - kotlin-gradle-plugin
          - kotlin-library
          - groovy-application
          - groovy-gradle-plugin
          - groovy-library
          - scala-application
          - scala-library
          - cpp-application
          - cpp-library
      dsl:
        description: DSL
        default: kotlin
        type: choice
        options:
         - groovy
         - kotlin
      java_version:
        required: true
        description: Java Version
        default: "21"
        type: string

jobs:
  gradle-init:
    runs-on: ubuntu-latest
    steps:
      - name: Setup Gradle
        uses: gradle/actions/setup-gradle@v4
        with:
          gradle-version: current
          cache-disabled: true

      - name: Init Project
        run: |
          gradle init \
            --no-daemon \
            --no-comments \
            --no-split-project \
            --project-name "${{ inputs.project_name }}" \
            --package "${{ inputs.package }}" \
            --type "${{ inputs.type }}" \
            --dsl "${{ inputs.dsl }}" \
            --java-version "${{ inputs.java_version }}"

      - name: Upload Project
        uses: actions/upload-artifact@v4
        with:
          name: ${{ inputs.project_name }}
          path: .
          include-hidden-files: true
